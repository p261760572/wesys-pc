!function(t){function e(e,n){function a(t,e){if(t.length&&s(t)){var n=t.panel("options");t.panel("resize",{width:h.width(),height:n.height});var a=t.panel("panel").outerHeight();t.panel("move",{left:0,top:"n"==e?0:h.height()-a}),d.height-=a,"n"==e&&(d.top+=a,!n.split&&n.border&&d.top--),!n.split&&n.border&&d.height++}}function i(t,e){if(t.length&&s(t)){var n=t.panel("options");t.panel("resize",{width:n.width,height:d.height});var a=t.panel("panel").outerWidth();t.panel("move",{left:"e"==e?h.width()-a:0,top:d.top}),d.width-=a,"w"==e&&(d.left+=a,!n.split&&n.border&&d.left--),!n.split&&n.border&&d.width++}}var o=t.data(e,"layout"),l=o.options,p=o.panels,h=t(e);n&&t.extend(l,{width:n.width,height:n.height}),"body"==e.tagName.toLowerCase()?h._size("fit"):h._size(l);var d={top:0,left:0,width:h.width(),height:h.height()};a(s(p.expandNorth)?p.expandNorth:p.north,"n"),a(s(p.expandSouth)?p.expandSouth:p.south,"s"),i(s(p.expandEast)?p.expandEast:p.east,"e"),i(s(p.expandWest)?p.expandWest:p.west,"w"),p.center.panel("resize",d)}function n(n){function i(e){var i=t.fn.layout.parsePanelOptions(e);"north,south,east,west,center".indexOf(i.region)>=0&&a(n,i,e)}var o=t(n);o.addClass("layout");var l=o.layout("options"),s=l.onAdd;l.onAdd=function(){},o.find(">div,>form>div").each(function(){i(this)}),l.onAdd=s,o.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),o.bind("_resize",function(a,i){return(t(this).hasClass("easyui-fluid")||i)&&e(n),!1})}function a(n,a,i){function l(e){var a="expand"+r.substring(0,1).toUpperCase()+r.substring(1),i=p["center"],o="north"==r||"south"==r?"minHeight":"minWidth",l="north"==r||"south"==r?"maxHeight":"maxWidth",h="north"==r||"south"==r?"_outerHeight":"_outerWidth",d=t.parser.parseValue(l,p[r].panel("options")[l],t(n)),u=t.parser.parseValue(o,i.panel("options")[o],t(n)),c=i.panel("panel")[h]()-u;return s(p[a])?c+=p[a][h]()-1:c+=t(e)[h](),c>d&&(c=d),c}a.region=a.region||"center";var p=t.data(n,"layout").panels,h=t(n),r=a.region;if(!p[r].length){var u=t(i);u.length||(u=t("<div></div>").appendTo(h));var c=t.extend({},t.fn.layout.paneldefaults,{width:u.length?parseInt(u[0].style.width)||u.outerWidth():"auto",height:u.length?parseInt(u[0].style.height)||u.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var e=t(this).panel("header").children("div.panel-tool");e.children("a.panel-tool-collapse").hide();var a={north:"up",south:"down",east:"right",west:"left"};if(a[r]){var i="layout-button-"+a[r],l=e.children("a."+i);l.length||(l=t('<a href="javascript:;"></a>').addClass(i).appendTo(e),l.bind("click",{dir:r},function(t){return o(n,t.data.dir),!1})),t(this).panel("options").collapsible?l.show():l.hide()}}},a,{cls:(a.cls||"")+" layout-panel layout-panel-"+r,bodyCls:(a.bodyCls||"")+" layout-body"});u.panel(c),p[r]=u;var f={north:"s",south:"n",east:"w",west:"e"},g=u.panel("panel");u.panel("options").split&&g.addClass("layout-split-"+r),g.resizable(t.extend({},{handles:f[r]||"",disabled:!u.panel("options").split,onStartResize:function(e){if(d=!0,"north"==r||"south"==r)var a=t(">div.layout-split-proxy-v",n);else var a=t(">div.layout-split-proxy-h",n);var i={display:"block"};"north"==r?(i.top=parseInt(g.css("top"))+g.outerHeight()-a.height(),i.left=parseInt(g.css("left")),i.width=g.outerWidth(),i.height=a.height()):"south"==r?(i.top=parseInt(g.css("top")),i.left=parseInt(g.css("left")),i.width=g.outerWidth(),i.height=a.height()):"east"==r?(i.top=parseInt(g.css("top"))||0,i.left=parseInt(g.css("left"))||0,i.width=a.width(),i.height=g.outerHeight()):"west"==r&&(i.top=parseInt(g.css("top"))||0,i.left=g.outerWidth()-a.width(),i.width=a.width(),i.height=g.outerHeight()),a.css(i),t('<div class="layout-mask"></div>').css({left:0,top:0,width:h.width(),height:h.height()}).appendTo(h)},onResize:function(e){if("north"==r||"south"==r){var a=l(this);t(this).resizable("options").maxHeight=a;var i=t(">div.layout-split-proxy-v",n),o="north"==r?e.data.height-i.height():t(n).height()-e.data.height;i.css("top",o)}else{var s=l(this);t(this).resizable("options").maxWidth=s;var i=t(">div.layout-split-proxy-h",n),p="west"==r?e.data.width-i.width():t(n).width()-e.data.width;i.css("left",p)}return!1},onStopResize:function(t){h.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),u.panel("resize",t.data),e(n),d=!1,h.find(">div.layout-mask").remove()}},a)),h.layout("options").onAdd.call(n,r)}}function i(e,n){var a=t.data(e,"layout").panels;if(a[n].length){a[n].panel("destroy"),a[n]=t();var i="expand"+n.substring(0,1).toUpperCase()+n.substring(1);a[i]&&(a[i].panel("destroy"),a[i]=void 0),t(e).layout("options").onRemove.call(e,n)}}function o(e,n,a){function i(){var a=t(e),i=p.center.panel("options"),o=r.collapsedSize;if("east"==n){var l=h.panel("panel")._outerWidth(),d=i.width+l-o;return!r.split&&r.border||d++,{resizeC:{width:d},expand:{left:a.width()-l},expandP:{top:i.top,left:a.width()-o,width:o,height:i.height},collapse:{left:a.width(),top:i.top,height:i.height}}}if("west"==n){var l=h.panel("panel")._outerWidth(),d=i.width+l-o;return!r.split&&r.border||d++,{resizeC:{width:d,left:o-1},expand:{left:0},expandP:{left:0,top:i.top,width:o,height:i.height},collapse:{left:-l,top:i.top,height:i.height}}}if("north"==n){var u=h.panel("panel")._outerHeight(),c=i.height;return s(p.expandNorth)||(c+=u-o+(r.split||!r.border?1:0)),p.east.add(p.west).add(p.expandEast).add(p.expandWest).panel("resize",{top:o-1,height:c}),{resizeC:{top:o-1,height:c},expand:{top:0},expandP:{top:0,left:0,width:a.width(),height:o},collapse:{top:-u,width:a.width()}}}if("south"==n){var u=h.panel("panel")._outerHeight(),c=i.height;return s(p.expandSouth)||(c+=u-o+(r.split||!r.border?1:0)),p.east.add(p.west).add(p.expandEast).add(p.expandWest).panel("resize",{height:c}),{resizeC:{height:c},expand:{top:a.height()-u},expandP:{top:a.height()-o,left:0,width:a.width(),height:o},collapse:{top:a.height(),width:a.width()}}}}void 0==a&&(a="normal");var p=t.data(e,"layout").panels,h=p[n],r=h.panel("options");if(0!=r.onBeforeCollapse.call(h)){var u="expand"+n.substring(0,1).toUpperCase()+n.substring(1);if(!p[u]){p[u]=function(a){var i={east:"left",west:"right",north:"down",south:"up"},o="north"==r.region||"south"==r.region,s="layout-button-"+i[a],p=t("<div></div>").appendTo(e);if(p.panel(t.extend({},t.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+a,title:"&nbsp;",titleDirection:r.titleDirection,iconCls:r.hideCollapsedContent?null:r.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:r.region,collapsedSize:r.collapsedSize,noheader:!o&&r.hideExpandTool,tools:o&&r.hideExpandTool?null:[{iconCls:s,handler:function(){return l(e,n),!1}}],onResize:function(){var e=t(this).children(".layout-expand-title");if(e.length){e._outerWidth(t(this).height());var n=(t(this).width()-Math.min(e._outerWidth(),e._outerHeight()))/2,a=Math.max(e._outerWidth(),e._outerHeight());e.hasClass("layout-expand-title-down")&&(n+=Math.min(e._outerWidth(),e._outerHeight()),a=0),e.css({left:n+"px",top:a+"px"})}}})),!r.hideCollapsedContent){var h="function"==typeof r.collapsedContent?r.collapsedContent.call(p[0],r.title):r.collapsedContent;o?p.panel("setTitle",h):p.html(h)}return p.panel("panel").hover(function(){t(this).addClass("layout-expand-over")},function(){t(this).removeClass("layout-expand-over")}),p}(n);var c=p[u].panel("panel");r.expandMode?c.bind("click",function(){if("dock"==r.expandMode)l(e,n);else{h.panel("expand",!1).panel("open");var a=i();h.panel("resize",a.collapse),h.panel("panel").animate(a.expand,function(){t(this).unbind(".layout").bind("mouseleave.layout",{region:n},function(n){1!=d&&(t("body>div.combo-p>div.combo-panel:visible").length||o(e,n.data.region))}),t(e).layout("options").onExpand.call(e,n)})}return!1}):c.css("cursor","default")}var f=i();s(p[u])||p.center.panel("resize",f.resizeC),h.panel("panel").animate(f.collapse,a,function(){h.panel("collapse",!1).panel("close"),p[u].panel("open").panel("resize",f.expandP),t(this).unbind(".layout"),t(e).layout("options").onCollapse.call(e,n)})}}function l(n,a){var i=t.data(n,"layout").panels,o=i[a];if(0!=o.panel("options").onBeforeExpand.call(o)){var l="expand"+a.substring(0,1).toUpperCase()+a.substring(1);if(i[l]){i[l].panel("close"),o.panel("panel").stop(!0,!0),o.panel("expand",!1).panel("open");var s=function(){var e=t(n),l=i.center.panel("options");return"east"==a&&i.expandEast?{collapse:{left:e.width(),top:l.top,height:l.height},expand:{left:e.width()-o.panel("panel")._outerWidth()}}:"west"==a&&i.expandWest?{collapse:{left:-o.panel("panel")._outerWidth(),top:l.top,height:l.height},expand:{left:0}}:"north"==a&&i.expandNorth?{collapse:{top:-o.panel("panel")._outerHeight(),width:e.width()},expand:{top:0}}:"south"==a&&i.expandSouth?{collapse:{top:e.height(),width:e.width()},expand:{top:e.height()-o.panel("panel")._outerHeight()}}:void 0}();o.panel("resize",s.collapse),o.panel("panel").animate(s.expand,function(){e(n),t(n).layout("options").onExpand.call(n,a)})}}}function s(t){return!!t&&(!!t.length&&t.panel("panel").is(":visible"))}function p(e){function n(t){var n=l[t];n.length&&n.panel("options").collapsed&&o(e,t,0)}var a=t.data(e,"layout"),i=a.options,l=a.panels,s=i.onCollapse;i.onCollapse=function(){},n("east"),n("west"),n("north"),n("south"),i.onCollapse=s}function h(n,a,i){var o=t(n).layout("panel",a);o.panel("options").split=i;var l="layout-split-"+a,s=o.panel("panel").removeClass(l);i&&s.addClass(l),s.resizable({disabled:!i}),e(n)}var d=!1;t.fn.layout=function(a,i){return"string"==typeof a?t.fn.layout.methods[a](this,i):(a=a||{},this.each(function(){var i=t.data(this,"layout");if(i)t.extend(i.options,a);else{var o=t.extend({},t.fn.layout.defaults,t.fn.layout.parseOptions(this),a);t.data(this,"layout",{options:o,panels:{center:t(),north:t(),south:t(),east:t(),west:t()}}),n(this)}e(this),p(this)}))},t.fn.layout.methods={options:function(e){return t.data(e[0],"layout").options},resize:function(t,n){return t.each(function(){e(this,n)})},panel:function(e,n){return t.data(e[0],"layout").panels[n]},collapse:function(t,e){return t.each(function(){o(this,e)})},expand:function(t,e){return t.each(function(){l(this,e)})},add:function(n,i){return n.each(function(){a(this,i),e(this),t(this).layout("panel",i.region).panel("options").collapsed&&o(this,i.region,0)})},remove:function(t,n){return t.each(function(){i(this,n),e(this)})},split:function(t,e){return t.each(function(){h(this,e,!0)})},unsplit:function(t,e){return t.each(function(){h(this,e,!1)})}},t.fn.layout.parseOptions=function(e){return t.extend({},t.parser.parseOptions(e,[{fit:"boolean"}]))},t.fn.layout.defaults={fit:!1,onExpand:function(t){},onCollapse:function(t){},onAdd:function(t){},onRemove:function(t){}},t.fn.layout.parsePanelOptions=function(e){t(e);return t.extend({},t.fn.panel.parseOptions(e),t.parser.parseOptions(e,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},t.fn.layout.paneldefaults=t.extend({},t.fn.panel.defaults,{region:null,split:!1,collapsedSize:28,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(e){var n=t(this),a=n.panel("options");if("north"==a.region||"south"==a.region)return e;var i=[];return a.iconCls&&i.push('<div class="panel-icon '+a.iconCls+'"></div>'),i.push('<div class="panel-title layout-expand-title'),i.push(" layout-expand-title-"+a.titleDirection),i.push(a.iconCls?" layout-expand-with-icon":""),i.push('">'),i.push(e),i.push("</div>"),i.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery);